{"version":3,"file":"faq.routes.js","names":["express","require","router","Router","Faq","asyncHandler","ApiResponse","default","mongoose","getActiveContentsByLangId","req","res","langid","params","query","contents","aggregate","$match","Language","$lookup","from","localField","foreignField","as","pipeline","Status","Languages","Page","$ne","status","json","error","message","route","get","module","exports"],"sources":["../../../src/app/routes/faq.routes.js"],"sourcesContent":["const express = require(\"express\");\nconst router = express.Router();\nconst Faq = require(\"../../admin/models/faqcontent\");\nconst asyncHandler = require(\"../utils/asyncHandler\");\nconst ApiResponse = require(\"../utils/apiresponse\");\nconst { default: mongoose } = require(\"mongoose\");\n\nconst getActiveContentsByLangId = asyncHandler(async (req, res) => {\n\tconst langid = req.params.langid;\n\tconst { query } = req.query;\n\n\ttry {\n\t\tconst contents = await Faq.aggregate([\n\t\t\t{\n\t\t\t\t$match: {\n\t\t\t\t\tLanguage: langid,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t$lookup: {\n\t\t\t\t\tfrom: \"faqs\",\n\t\t\t\t\tlocalField: \"Page\",\n\t\t\t\t\tforeignField: \"_id\",\n\t\t\t\t\tas: \"Page\",\n\t\t\t\t\tpipeline: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$match: {\n\t\t\t\t\t\t\t\tStatus: \"STATUS_ACTIVE\",\n\t\t\t\t\t\t\t\tLanguages: langid,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t$match: {\n\t\t\t\t\tPage: {\n\t\t\t\t\t\t$ne: null || [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t]);\n\n\t\tres.status(200).json(\n\t\t\tnew ApiResponse(\n\t\t\t\t200,\n\t\t\t\t{\n\t\t\t\t\tcontents,\n\t\t\t\t},\n\t\t\t\t\"Pages fetched Successfully\"\n\t\t\t)\n\t\t);\n\t} catch (error) {\n\t\tres.status(500).json({ message: error.message });\n\t}\n});\nrouter.route(\"/contents/:langid\").get(getActiveContentsByLangId);\n\nmodule.exports = router;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,GAAG,GAAGH,OAAO,CAAC,+BAA+B,CAAC;AACpD,MAAMI,YAAY,GAAGJ,OAAO,CAAC,uBAAuB,CAAC;AACrD,MAAMK,WAAW,GAAGL,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAM;EAAEM,OAAO,EAAEC;AAAS,CAAC,GAAGP,OAAO,CAAC,UAAU,CAAC;AAEjD,MAAMQ,yBAAyB,GAAGJ,YAAY,CAAC,OAAOK,GAAG,EAAEC,GAAG,KAAK;EAClE,MAAMC,MAAM,GAAGF,GAAG,CAACG,MAAM,CAACD,MAAM;EAChC,MAAM;IAAEE;EAAM,CAAC,GAAGJ,GAAG,CAACI,KAAK;EAE3B,IAAI;IACH,MAAMC,QAAQ,GAAG,MAAMX,GAAG,CAACY,SAAS,CAAC,CACpC;MACCC,MAAM,EAAE;QACPC,QAAQ,EAAEN;MACX;IACD,CAAC,EACD;MACCO,OAAO,EAAE;QACRC,IAAI,EAAE,MAAM;QACZC,UAAU,EAAE,MAAM;QAClBC,YAAY,EAAE,KAAK;QACnBC,EAAE,EAAE,MAAM;QACVC,QAAQ,EAAE,CACT;UACCP,MAAM,EAAE;YACPQ,MAAM,EAAE,eAAe;YACvBC,SAAS,EAAEd;UACZ;QACD,CAAC;MAEH;IACD,CAAC,EACD;MACCK,MAAM,EAAE;QACPU,IAAI,EAAE;UACLC,GAAG,EAAE,IAAI,IAAI;QACd;MACD;IACD,CAAC,CACD,CAAC;IAEFjB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CACnB,IAAIxB,WAAW,CACd,GAAG,EACH;MACCS;IACD,CAAC,EACD,4BACD,CACD,CAAC;EACF,CAAC,CAAC,OAAOgB,KAAK,EAAE;IACfpB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEE,OAAO,EAAED,KAAK,CAACC;IAAQ,CAAC,CAAC;EACjD;AACD,CAAC,CAAC;AACF9B,MAAM,CAAC+B,KAAK,CAAC,mBAAmB,CAAC,CAACC,GAAG,CAACzB,yBAAyB,CAAC;AAEhE0B,MAAM,CAACC,OAAO,GAAGlC,MAAM","ignoreList":[]}