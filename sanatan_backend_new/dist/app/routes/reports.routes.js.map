{"version":3,"file":"reports.routes.js","names":["express","require","router","Router","Report","asyncHandler","createReport","req","res","fullName","email","reason","file","filename","message","body","AddReport","user","_id","newReport","save","status","json","err","getReports","Reports","find","route","post","get","module","exports"],"sources":["../../../src/app/routes/reports.routes.js"],"sourcesContent":["const express = require(\"express\");\nconst router = express.Router();\nconst Report = require(\"../models/users/report\");\nconst asyncHandler = require(\"../utils/asyncHandler\");\n\nconst createReport = asyncHandler(async (req, res) => {\n\tconst { fullName, email, reason, file, filename, message } =\n\t\treq.body;\n\tconst AddReport = new Report({\n\t\tuser: req.user._id,\n\t\tfullName: fullName,\n\t\temail: email,\n\t\treason: reason,\n\t\tfile: file,\n\t\tmessage: message,\n\t\tfilename: filename,\n\t});\n\ttry {\n\t\tconst newReport = await AddReport.save();\n\t\tres.status(200).json(newReport);\n\t} catch (err) {\n\t\tres.status(400).json({ message: err.message });\n\t}\n});\nconst getReports = asyncHandler(async (req, res) => {\n\ttry {\n\t\tconst Reports = await Report.find({\n\t\t\tuser: req.user._id,\n\t\t});\n\t\tres.status(200).json(Reports);\n\t} catch (err) {\n\t\tres.status(400).json({ message: err.message });\n\t}\n});\n\nrouter.route(\"/add\").post(createReport);\nrouter.route(\"/\").get(getReports);\n\nmodule.exports = router;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,MAAM,GAAGH,OAAO,CAAC,wBAAwB,CAAC;AAChD,MAAMI,YAAY,GAAGJ,OAAO,CAAC,uBAAuB,CAAC;AAErD,MAAMK,YAAY,GAAGD,YAAY,CAAC,OAAOE,GAAG,EAAEC,GAAG,KAAK;EACrD,MAAM;IAAEC,QAAQ;IAAEC,KAAK;IAAEC,MAAM;IAAEC,IAAI;IAAEC,QAAQ;IAAEC;EAAQ,CAAC,GACzDP,GAAG,CAACQ,IAAI;EACT,MAAMC,SAAS,GAAG,IAAIZ,MAAM,CAAC;IAC5Ba,IAAI,EAAEV,GAAG,CAACU,IAAI,CAACC,GAAG;IAClBT,QAAQ,EAAEA,QAAQ;IAClBC,KAAK,EAAEA,KAAK;IACZC,MAAM,EAAEA,MAAM;IACdC,IAAI,EAAEA,IAAI;IACVE,OAAO,EAAEA,OAAO;IAChBD,QAAQ,EAAEA;EACX,CAAC,CAAC;EACF,IAAI;IACH,MAAMM,SAAS,GAAG,MAAMH,SAAS,CAACI,IAAI,CAAC,CAAC;IACxCZ,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,SAAS,CAAC;EAChC,CAAC,CAAC,OAAOI,GAAG,EAAE;IACbf,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAER,OAAO,EAAES,GAAG,CAACT;IAAQ,CAAC,CAAC;EAC/C;AACD,CAAC,CAAC;AACF,MAAMU,UAAU,GAAGnB,YAAY,CAAC,OAAOE,GAAG,EAAEC,GAAG,KAAK;EACnD,IAAI;IACH,MAAMiB,OAAO,GAAG,MAAMrB,MAAM,CAACsB,IAAI,CAAC;MACjCT,IAAI,EAAEV,GAAG,CAACU,IAAI,CAACC;IAChB,CAAC,CAAC;IACFV,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACG,OAAO,CAAC;EAC9B,CAAC,CAAC,OAAOF,GAAG,EAAE;IACbf,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAER,OAAO,EAAES,GAAG,CAACT;IAAQ,CAAC,CAAC;EAC/C;AACD,CAAC,CAAC;AAEFZ,MAAM,CAACyB,KAAK,CAAC,MAAM,CAAC,CAACC,IAAI,CAACtB,YAAY,CAAC;AACvCJ,MAAM,CAACyB,KAAK,CAAC,GAAG,CAAC,CAACE,GAAG,CAACL,UAAU,CAAC;AAEjCM,MAAM,CAACC,OAAO,GAAG7B,MAAM","ignoreList":[]}