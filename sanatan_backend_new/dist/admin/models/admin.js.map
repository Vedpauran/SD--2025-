{"version":3,"file":"admin.js","names":["mongoose","require","bcrypt","jwt","AdminSchema","Schema","email","type","String","required","unique","password","role","refreshToken","timestamps","pre","next","isModified","hash","methods","isPasswordCorrect","compare","generateAccessToken","sign","_id","process","env","ACCESS_TOKEN_SECRET","expiresIn","ACCESS_TOKEN_EXPIRY","generateRefreshToken","REFRESH_TOKEN_SECRET","REFRESH_TOKEN_EXPIRY","Admin","model","module","exports"],"sources":["../../../src/admin/models/admin.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\nconst bcrypt = require(\"bcrypt\");\nconst jwt = require(\"jsonwebtoken\");\nconst AdminSchema = new mongoose.Schema(\n\t{\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t\tunique: true,\n\t\t},\n\t\tpassword: {\n\t\t\ttype: String,\n\t\t},\n\t\trole: {\n\t\t\ttype: String,\n\t\t},\n\t\trefreshToken: {\n\t\t\ttype: String,\n\t\t},\n\t},\n\t{\n\t\ttimestamps: true,\n\t}\n);\n\nAdminSchema.pre(\"save\", async function (next) {\n\tif (!this.isModified(\"password\")) return next();\n\n\tthis.password = await bcrypt.hash(this.password, 10);\n\tnext();\n});\n\nAdminSchema.methods.isPasswordCorrect = async function (password) {\n\treturn await bcrypt.compare(password, this.password);\n};\n\nAdminSchema.methods.generateAccessToken = function () {\n\treturn jwt.sign(\n\t\t{\n\t\t\t_id: this._id,\n\t\t\temail: this.email,\n\t\t},\n\t\tprocess.env.ACCESS_TOKEN_SECRET,\n\t\t{\n\t\t\texpiresIn: process.env.ACCESS_TOKEN_EXPIRY,\n\t\t}\n\t);\n};\nAdminSchema.methods.generateRefreshToken = function () {\n\treturn jwt.sign(\n\t\t{\n\t\t\t_id: this._id,\n\t\t},\n\t\tprocess.env.REFRESH_TOKEN_SECRET,\n\t\t{\n\t\t\texpiresIn: process.env.REFRESH_TOKEN_EXPIRY,\n\t\t}\n\t);\n};\n\nconst Admin = mongoose.model(\"admin\", AdminSchema);\nmodule.exports = Admin;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAME,GAAG,GAAGF,OAAO,CAAC,cAAc,CAAC;AACnC,MAAMG,WAAW,GAAG,IAAIJ,QAAQ,CAACK,MAAM,CACtC;EACCC,KAAK,EAAE;IACNC,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdC,MAAM,EAAE;EACT,CAAC;EACDC,QAAQ,EAAE;IACTJ,IAAI,EAAEC;EACP,CAAC;EACDI,IAAI,EAAE;IACLL,IAAI,EAAEC;EACP,CAAC;EACDK,YAAY,EAAE;IACbN,IAAI,EAAEC;EACP;AACD,CAAC,EACD;EACCM,UAAU,EAAE;AACb,CACD,CAAC;AAEDV,WAAW,CAACW,GAAG,CAAC,MAAM,EAAE,gBAAgBC,IAAI,EAAE;EAC7C,IAAI,CAAC,IAAI,CAACC,UAAU,CAAC,UAAU,CAAC,EAAE,OAAOD,IAAI,CAAC,CAAC;EAE/C,IAAI,CAACL,QAAQ,GAAG,MAAMT,MAAM,CAACgB,IAAI,CAAC,IAAI,CAACP,QAAQ,EAAE,EAAE,CAAC;EACpDK,IAAI,CAAC,CAAC;AACP,CAAC,CAAC;AAEFZ,WAAW,CAACe,OAAO,CAACC,iBAAiB,GAAG,gBAAgBT,QAAQ,EAAE;EACjE,OAAO,MAAMT,MAAM,CAACmB,OAAO,CAACV,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC;AACrD,CAAC;AAEDP,WAAW,CAACe,OAAO,CAACG,mBAAmB,GAAG,YAAY;EACrD,OAAOnB,GAAG,CAACoB,IAAI,CACd;IACCC,GAAG,EAAE,IAAI,CAACA,GAAG;IACblB,KAAK,EAAE,IAAI,CAACA;EACb,CAAC,EACDmB,OAAO,CAACC,GAAG,CAACC,mBAAmB,EAC/B;IACCC,SAAS,EAAEH,OAAO,CAACC,GAAG,CAACG;EACxB,CACD,CAAC;AACF,CAAC;AACDzB,WAAW,CAACe,OAAO,CAACW,oBAAoB,GAAG,YAAY;EACtD,OAAO3B,GAAG,CAACoB,IAAI,CACd;IACCC,GAAG,EAAE,IAAI,CAACA;EACX,CAAC,EACDC,OAAO,CAACC,GAAG,CAACK,oBAAoB,EAChC;IACCH,SAAS,EAAEH,OAAO,CAACC,GAAG,CAACM;EACxB,CACD,CAAC;AACF,CAAC;AAED,MAAMC,KAAK,GAAGjC,QAAQ,CAACkC,KAAK,CAAC,OAAO,EAAE9B,WAAW,CAAC;AAClD+B,MAAM,CAACC,OAAO,GAAGH,KAAK","ignoreList":[]}