{"version":3,"file":"imgs.js","names":["express","require","router","Router","multer","storage","diskStorage","destination","req","file","cb","filename","Date","now","originalname","upload","post","single","res","name","link","oname","status","json","array","files","map","module","exports"],"sources":["../../../../src/admin/routes/upload/imgs.js"],"sourcesContent":["const express =require('express');\nconst router = express.Router();\nconst multer  = require('multer');\nconst storage = multer.diskStorage({\n    destination:function(req,file,cb){\n        cb(null,\"./public/uploads/images\")\n    },\n    filename:function(req,file,cb){\n        cb(null,Date.now()+'-'+file.originalname)\n    },\n  \n})\n\nconst upload = multer({storage});\n\nrouter.post('/',upload.single('file'), (req, res) => {\n    var name = req.file.filename;\n    var link = `uploads/images/${name}`;\n    var oname = req.file.originalname;\n      res.status(200).json({link:link,name:oname});\n    });\n\nrouter.post('/multiple',upload.array('file'), (req, res) => {\n    const link = req.files.map(file => ({\n       link: `uploads/images/${file.filename}`,\n    }));\n    \n      res.status(200).json(link);\n    });\n\n  \n\n\nmodule.exports = router;"],"mappings":"AAAA,MAAMA,OAAO,GAAEC,OAAO,CAAC,SAAS,CAAC;AACjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,MAAM,GAAIH,OAAO,CAAC,QAAQ,CAAC;AACjC,MAAMI,OAAO,GAAGD,MAAM,CAACE,WAAW,CAAC;EAC/BC,WAAW,EAAC,SAAAA,CAASC,GAAG,EAACC,IAAI,EAACC,EAAE,EAAC;IAC7BA,EAAE,CAAC,IAAI,EAAC,yBAAyB,CAAC;EACtC,CAAC;EACDC,QAAQ,EAAC,SAAAA,CAASH,GAAG,EAACC,IAAI,EAACC,EAAE,EAAC;IAC1BA,EAAE,CAAC,IAAI,EAACE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAC,GAAG,GAACJ,IAAI,CAACK,YAAY,CAAC;EAC7C;AAEJ,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAGX,MAAM,CAAC;EAACC;AAAO,CAAC,CAAC;AAEhCH,MAAM,CAACc,IAAI,CAAC,GAAG,EAACD,MAAM,CAACE,MAAM,CAAC,MAAM,CAAC,EAAE,CAACT,GAAG,EAAEU,GAAG,KAAK;EACjD,IAAIC,IAAI,GAAGX,GAAG,CAACC,IAAI,CAACE,QAAQ;EAC5B,IAAIS,IAAI,GAAG,kBAAkBD,IAAI,EAAE;EACnC,IAAIE,KAAK,GAAGb,GAAG,CAACC,IAAI,CAACK,YAAY;EAC/BI,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAACH,IAAI,EAACA,IAAI;IAACD,IAAI,EAACE;EAAK,CAAC,CAAC;AAC9C,CAAC,CAAC;AAENnB,MAAM,CAACc,IAAI,CAAC,WAAW,EAACD,MAAM,CAACS,KAAK,CAAC,MAAM,CAAC,EAAE,CAAChB,GAAG,EAAEU,GAAG,KAAK;EACxD,MAAME,IAAI,GAAGZ,GAAG,CAACiB,KAAK,CAACC,GAAG,CAACjB,IAAI,KAAK;IACjCW,IAAI,EAAE,kBAAkBX,IAAI,CAACE,QAAQ;EACxC,CAAC,CAAC,CAAC;EAEDO,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,IAAI,CAAC;AAC5B,CAAC,CAAC;AAKNO,MAAM,CAACC,OAAO,GAAG1B,MAAM","ignoreList":[]}